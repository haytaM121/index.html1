<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Superbes Bougies – شموع فاخرة</title>
    <style>
        body {
            font-family: 'Cairo', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fff8f0;
            color: #333;
            text-align: center;
        }

        header {
            padding: 20px;
            background-color: #f8e1e7;
        }

        header img {
            max-width: 200px;
            border-radius: 10px;
        }

        .product {
            margin: 20px auto;
            max-width: 300px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
        }

        .product img {
            max-width: 100%;
            border-radius: 10px;
        }

        .product h2 {
            font-size: 24px;
            margin: 10px 0;
        }

        .product .price {
            color: #d4af37;
            font-size: 20px;
            font-weight: bold;
            margin: 10px 0;
            direction: ltr; /* Ensure numbers are displayed in French format */
        }

        .order-btn {
            background-color: #28a745; /* Bright green */
            color: white;
            border: none;
            padding: 15px 25px; /* Enlarged button */
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px #28a745;
        }

        .order-btn:hover {
            background-color: #218838;
            box-shadow: 0 0 20px #28a745, 0 0 30px #28a745;
            animation: glow 1s infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 20px #28a745, 0 0 30px #28a745;
            }
            to {
                box-shadow: 0 0 30px #218838, 0 0 40px #218838;
            }
        }

        .form-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .form-container.active {
            display: block;
        }

        .form-container input, .form-container select {
            width: 100%;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .form-container button {
            background-color: #d4af37;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .form-container button:hover {
            background-color: #b38e2c;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Adjusted for up to 10 products */
            gap: 20px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <header>
        <img src="https://i.postimg.cc/Qxjp5qWc/6023652377095161941-1.jpg" alt="Superbes Bougies Logo" class="logo-image">
    </header>
    <div id="notification" style="display: none; background-color: #f8e1e7; color: #333; padding: 10px; margin: 10px 0; border-radius: 5px;"></div>
    <div class="products-grid">
        <div class="product">
            <img src="https://i.postimg.cc/B6tzq0JQ/6035118342047645560.jpg" alt="شمعة معطرة">
            <h2>شمعة معطرة</h2>
            <p class="price">800 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة معطرة')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/TYZ0MxWc/6046476546270676529.jpg" alt="شمعة رومانسية">
            <h2>شمعة رومانسية</h2>
            <p class="price">1200 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة رومانسية')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/y881Kq4k/14252e50-5898-43f9-baac-39269ee94593.jpg" alt="شمعة فاخرة">
            <h2>شمعة فاخرة</h2>
            <p class="price">1500 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة فاخرة')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/XqLR1Jvx/6050873957126620379.jpg" alt="شمعة كلاسيكية">
            <h2>شمعة كلاسيكية</h2>
            <p class="price">1000 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة كلاسيكية')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/cCR2zcsQ/6046476546270676525.jpg" alt="شمعة إضافية 1">
            <h2>شمعة إضافية 1</h2>
            <p class="price">900 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة إضافية 1')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/zGbSXGgQ/6046476546270676523.jpg" alt="شمعة إضافية 2">
            <h2>شمعة إضافية 2</h2>
            <p class="price">1100 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة إضافية 2')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/0Q8wmkzP/6046476546270676522.jpg" alt="شمعة إضافية 3">
            <h2>شمعة إضافية 3</h2>
            <p class="price">1300 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة إضافية 3')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/TYyWnH3L/6046476546270676531.jpg" alt="شمعة إضافية 4">
            <h2>شمعة إضافية 4</h2>
            <p class="price">1400 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة إضافية 4')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/vH6c4g05/6046476546270676530.jpg" alt="شمعة إضافية 5">
            <h2>شمعة إضافية 5</h2>
            <p class="price">1600 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة إضافية 5')">اطلب الآن</button>
        </div>
        <div class="product">
            <img src="https://i.postimg.cc/CKJK3jKp/6050873957126620376.jpg" alt="شمعة إضافية 6">
            <h2>شمعة إضافية 6</h2>
            <p class="price">1700 دج</p>
            <button class="order-btn" onclick="openOrderForm('شمعة إضافية 6')">اطلب الآن</button>
        </div>
    </div>

    <div class="form-container" id="orderForm">
        <h2>نموذج الطلب</h2>
        <form onsubmit="submitOrder(event)">
            <input type="text" id="fullName" placeholder="الاسم الكامل" required>
            <input type="tel" id="phoneNumber" placeholder="رقم الهاتف" required>
            <label for="stateSelect">الولاية:</label>
            <select id="stateSelect" name="state" required>
                <option value="">اختر الولاية</option>
            </select>
            <label for="districtSelect">الدائرة:</label>
            <select id="districtSelect" name="district" disabled>
                <option value="">اختر أولاً الولاية</option>
            </select>
            <label for="citySelect">البلدية:</label>
            <select id="citySelect" name="city" disabled required>
                <option value="">اختر أولاً الولاية</option>
            </select>
            <label for="deliveryMethod">طريقة التوصيل:</label>
            <select id="deliveryMethod" name="deliveryMethod">
                <option value="door">توصيل للباب – 30 دج</option>
                <option value="pickup">استلام من المكتب – 20 دج</option>
                <option value="freeTlemcen">توصيل مجاني داخل ولاية تلمسان</option>
            </select>
            <label for="productSelect">الشمعة:</label>
            <select id="productSelect" name="product">
                <option value="">اختر الشمعة</option>
                <option value="800">شمعة معطرة – 800 دج</option>
                <option value="1200">شمعة رومانسية – 1200 دج</option>
                <option value="1500">شمعة فاخرة – 1500 دج</option>
                <option value="1000">شمعة كلاسيكية – 1000 دج</option>
            </select>
            <label for="quantity">الكمية:</label>
            <input type="number" id="quantity" name="quantity" value="1" min="1">
            <p id="deliveryCost">تكلفة التوصيل: 0 دج</p>
            <p id="totalPrice">السعر الإجمالي: <span id="totalAmount">0</span> دج</p>
            <input type="text" id="productName" placeholder="اسم المنتج" readonly>
            <input type="number" id="orderQuantity" placeholder="الكمية" min="1" required>
            <button type="submit">إرسال الطلب</button>
        </form>
        <button onclick="closeOrderForm()">إغلاق</button>
    </div>

    <script>
        const algeriaData = {
            "وهران": ["وهران", "عين الترك", "بئر الجير", "سيدي الهواري", "بلعباس", "السانية", "مستغانم", "المعمورة", "فيلا"],
            "تلمسان": ["تلمسان", "المنصورة", "الرمشي", "مغنية", "سبدو", "النمامشة"],
            "سيدي بلعباس": ["سيدي بلعباس", "عين البرد", "مازونة", "شعيب", "سيدي حسان"],
            "تيارت": ["تيارت", "مروانة", "بوقاعة", "العشعاشة", "عين الذهب"]
        };

        const deliveryCosts = {
            "وهران": 30,
            "تلمسان": 0,
            "سيدي بلعباس": 30,
            "تيارت": 30
        };

        const stateSelect = document.getElementById('stateSelect');
        const citySelect = document.getElementById('citySelect');

        function populateStates() {
            Object.keys(algeriaData).forEach(state => {
                const opt = document.createElement('option');
                opt.value = state;
                opt.textContent = state;
                stateSelect.appendChild(opt);
            });
        }

        function populateCities() {
            const selectedState = stateSelect.value;
            citySelect.innerHTML = '';
            citySelect.disabled = true;
            if (!selectedState) {
                citySelect.innerHTML = '<option value="">اختر أولاً الولاية</option>';
                return;
            }
            algeriaData[selectedState].forEach(city => {
                const opt = document.createElement('option');
                opt.value = city;
                opt.textContent = city;
                citySelect.appendChild(opt);
            });
            citySelect.disabled = false;
        }

        function calculateDeliveryCost(state) {
            const deliveryMethod = document.getElementById('deliveryMethod').value;
            if (state === "تلمسان" && deliveryMethod === "freeTlemcen") {
                return 0;
            }
            return deliveryMethod === "pickup" ? 20 : (deliveryCosts[state] || 30);
        }

        function updateDeliveryCost() {
            const state = stateSelect.value;
            const cost = calculateDeliveryCost(state);
            alert(`تكلفة التوصيل: ${cost} دج`);
        }

        document.addEventListener('DOMContentLoaded', () => {
            populateStates();
            stateSelect.addEventListener('change', () => {
                populateCities();
                updateDeliveryCost();
            });
            document.getElementById('deliveryMethod').addEventListener('change', updateDeliveryCost);
        });

        function openOrderForm(productName) {
            document.getElementById('orderForm').classList.add('active');
            document.getElementById('productName').value = productName;
        }

        function closeOrderForm() {
            document.getElementById('orderForm').classList.remove('active');
        }

        function submitOrder(event) {
            event.preventDefault();
            const fullName = document.getElementById('fullName').value.trim();
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const state = stateSelect.value;
            const city = citySelect.value;
            const productName = document.getElementById('productName').value.trim();
            const quantity = document.getElementById('orderQuantity').value;

            if (!fullName || !phoneNumber || !state || !city || !productName || !quantity) {
                alert("يرجى ملء جميع الحقول المطلوبة.");
                return;
            }

            const message = `طلب جديد:
الاسم: ${fullName}
رقم الهاتف: ${phoneNumber}
الولاية: ${state}
البلدية: ${city}
المنتج: ${productName}
الكمية: ${quantity}`;

            const whatsappURL = `https://wa.me/0556290604?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        const deliveryMethodSelect = document.getElementById('deliveryMethod');
        const quantityInput = document.getElementById('quantity');
        const deliveryCostElement = document.getElementById('deliveryCost');
        const totalAmountElement = document.getElementById('totalAmount');
        const productSelect = document.getElementById('productSelect');

        function getProductPrice() {
            const selectedOption = productSelect.options[productSelect.selectedIndex];
            return parseInt(selectedOption.value, 10) || 0;
        }

        function getDeliveryCost() {
            const state = stateSelect.value;
            const method = deliveryMethodSelect.value;
            if (method === 'freeTlemcen' && state === 'تلمسان') return 0;
            if (method === 'door') return 30;
            if (method === 'pickup') return 20;
            return 0;
        }

        function updateCosts() {
            const productPrice = getProductPrice();
            const quantity = parseInt(document.getElementById('orderQuantity').value, 10) || 1;
            const deliveryCost = getDeliveryCost();
            const total = productPrice * quantity + deliveryCost;

            deliveryCostElement.textContent = `تكلفة التوصيل: ${deliveryCost} دج`;
            totalAmountElement.textContent = total;
        }

        productSelect.addEventListener('change', updateCosts);
        deliveryMethodSelect.addEventListener('change', updateCosts);
        quantityInput.addEventListener('input', updateCosts);
        stateSelect.addEventListener('change', updateCosts);

        document.addEventListener('DOMContentLoaded', () => {
            updateCosts();
        });

        function formatPrice(price) {
            return price.toLocaleString('fr-FR') + ' DA'; // Format price in French style
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.product .price').forEach(priceElement => {
                const priceText = priceElement.textContent.trim().match(/\d+/g)?.join('');
                if (priceText) {
                    priceElement.textContent = formatPrice(Number(priceText));
                }
            });
        });

        // تأكد من أن جميع الروابط والصور تستخدم مسارات مطلقة أو روابط URL كاملة
        const baseURL = window.location.origin;

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('img').forEach(img => {
                if (!img.src.startsWith('http')) {
                    img.src = `${baseURL}/${img.getAttribute('src')}`;
                }
            });
        });

        // تأكد من أن روابط WhatsApp تعمل بشكل صحيح
        const whatsappNumber = "0556290604"; // تأكد من صحة الرقم
        function submitOrder(event) {
            event.preventDefault();
            const fullName = document.getElementById('fullName').value.trim();
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const state = stateSelect.value;
            const city = citySelect.value;
            const productName = document.getElementById('productName').value.trim();
            const quantity = document.getElementById('orderQuantity').value;

            if (!fullName || !phoneNumber || !state || !city || !productName || !quantity) {
                alert("يرجى ملء جميع الحقول المطلوبة.");
                return;
            }

            const message = `طلب جديد:
الاسم: ${fullName}
رقم الهاتف: ${phoneNumber}
الولاية: ${state}
البلدية: ${city}
المنتج: ${productName}
الكمية: ${quantity}`;

            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }
    </script>
</body>
</html>